---
title: "🌏 네트워크 구조 이해:: OSI모델의 전체 흐름 이해하기"
tags:
  - [network]
permalink: /network/osiModel

navigation: true
toc: true
toc_sticky: true

date: 2021-12-04
last_modified_at: 2021-12-04
---

![]()

<span style="color:Teal">**OSI모델**</span>의 <span style="color:Teal">**전체 흐름**</span>에 대해 공부하기

---

# 🌏 네트워크의 전체 흐름 살펴보기

### 🚀 What I Will Learn

- OSI모델의 전체 흐름 이해하기
- 웹에 접속할 때 이루어지는
  - 캡슐화와
  - 역캡슐화 이해하기

<br />

---

## <span style="background-color:aquamarine">LESSON 32. 랜 카드에서의 데이터 전달과 처리</span>

웹 사이트에 방문했을 때 이루어지는 <u>전체적인 데이터 처리 과정</u>에 대해 이해하기

### 1) 네트워크의 구성

![](https://images.velog.io/images/april_5/post/ebae1c0e-c45c-426f-94f1-fac4e86b0c83/image.png)

|계층|이름|역할|
|--|--|--|
|1 계층|물리 계층|데이터를 <span style="color:tomato">**전기 신호**</span>로 변환|
|2 계층|데이터 링크 계층|<span style="color:tomato">**랜**</span>에서 데이터를 <span style="color:tomato">**송수신**</span> 하는데 필요|
|3 계층|네트워크 계층|다른 네트워크에 있는 <span style="color:tomato">**목적지에 데이터를 전달**</span>|
|4 계층|전송 계층|목적지에 데이터를 <span style="color:tomato">**정확하게**</span> 전달하는 역할|
|7 계층 <br /> (세션 계층: 5 계층 <br /> 표현 계층: 6계층) |응용 계층 <br /> (세션 계층과 표현 계층 포함)|<span style="color:tomato">**애플리케이션**</span> 등에서 사용하는 데이터를 <span style="color:tomato">**송수신**</span>|

![](https://images.velog.io/images/april_5/post/f18b9118-7b9a-4a50-91c3-8193970b43fa/image.png)

컴퓨터, 스위치, 라우터, 웹 서버로 구성된 네트워크를 살펴보면 아래의 그림인데,

![](https://images.velog.io/images/april_5/post/8f6836f7-2113-4deb-a445-4e57661e529e/image.png)

이 그림을 OSI모델로 표현하면 아래의 그림으로 이해할 수 있다

![](https://images.velog.io/images/april_5/post/4bd6805d-8bfd-4344-9f82-d4363be3e55c/image.png)

<br />

### 2) 컴퓨터의 데이터가 전기 신호로 변환되는 과정

컴퓨터의 웹 브라우저에 `URL`을 입력할 때 부터 웹 서버에 도착할 때 까지 OSI모델은 <span style="color:Teal">**캡슐화**</span>와 <span style="color:Teal">**역캡슐화**</span>가 이루어진다

웹 브라우저에 `URL`을 입력하고 `엔터키`를 누르면 캡슐화가 시작된다. 단, 3-way 핸드셰이크는 이미 완료되어 연결이 확립되어 있다고 가정하고 살펴보자

#### ✔️ 캡슐화 과정

① 3-way 핸드셰이크 이후, <span style="color:Teal">**응용 계층**</span>에서 데이터를 요청하는 **HTTP 메시지**를 전송
  
② <span style="color:Teal">**전송 계층**</span>에서 
  - <u>출발지 포트 번호와 목적지 포트 번호 포함된 **TCP 헤더**</u>가 붙은 
  - **세그먼트**(=TCP헤더를 가진 데이터)가 생성되어 네트워크 계층으로 전달
  
③ <span style="color:Teal">**네트워크 계층**</span>에서 
  - <u>출발지 IP 주소와 목적지 IP 주소가 포함된 **IP 헤더**</u>가 붙은 
  - **IP 패킷**(=IP헤더가 붙은 데이터) 이 생성되어 데이터 링크 계층으로 전달
  
④ <span style="color:Teal">**데이터 링크 계층**</span>에서 
  - <u>출발지 MAC 주소와 목적지 MAC 주소가 포함된 **이더넷 헤더**</u>가 붙은 **이더넷 프레임** 생성
  
⑤ <span style="color:Teal">**물리 계층**</span>에서 이더넷 프레임을 전기 신호로 변환한 후, 네트워크로 전송

#### ✔️ 역캡슐화 과정

- 캡슐화 과정과 반대로 진행 
  - 붙은 헤더들이 차례로 떨어지고 데이터만 남는다.

<br />

---

## <span style="background-color:aquamarine">LESSON 33. 스위치와 라우터에서의 데이터 전달과 처리</span>

### 1) 스위치에서의 데이터 전달과 처리

![](https://images.velog.io/images/april_5/post/8d31b09b-f605-4d00-9478-c4deecd94e89/image.png)

>**스위치**A: **데이터 링크 계층**에서 데이터를 **전기 신호**로 변환하여 라우터A로 전송

<br />

### 2) 라우터에서의 데이터 전달과 처리

라우터A에서는

1️⃣ **데이터 링크 계층**에서 이더넷 프레임의 목적지 MAC 주소와 자신의 MAC 주소 비교

2️⃣ 비교 후 같으면 **이더넷 헤더와 트레일러 분리** (역캡슐화)

3️⃣ **네트워크 계층**에 전달 후 라우팅 테이블과 목적지 IP 주소 비교

4️⃣ 목적지 IP 주소를 체크한 후 **라우팅 수행**

5️⃣ **데이터 링크 계층**으로 전달해서 이더넷 헤더와 트레일러 붙이기 (라우터에 전달되도록)

6️⃣ **물리 계층**에서 전기 신호로 변환한 후 네트워크로 전송 (라우터1 ➔ 라우터2)

7️⃣ 수신 라우터에서 이더넷 프레임의 목적지 MAC 주소와 자신의 MAC 주소 비교

8️⃣ 주소 같으면 역캡슐화 수행 후 **네트워크 계층**으로 전달, 라우팅 테이블과 목적지 IP 주소 비교

9️⃣ 라우팅 수행 후 이더넷 헤더와 트레일러 붙이기 (스위치에 전달되도록)

🔟 **물리 계층**에서 전기 신호로 변환한 후 네트워크로 전송 (라우터2 ➔ 스위치2)

<br />

---

## <span style="background-color:aquamarine">Lesson 34. 웹 서버에서의 데이터 전달과 처리</span>

### 1) 웹 서버에서의 데이터 전달과 처리

1️⃣ **물리 계층**에서 전기 신호로 변환된 데이터 수신

2️⃣ **데이터 링크 계층**에서 이더넷 프레임의 목적지 MAC 주소와 자신의 MAC 주소 비교

3️⃣ 비교 후 같으면 이더넷 헤더와 트레일러 분리 (역캡슐화)

4️⃣ **네트워크 계층**에서 목적지 IP 주소와 웹 서버의 IP 주소 같은지 확인

5️⃣ 같으면 IP 헤더 분리 후 전송 계층으로 전송

6️⃣ **전송 계층**에서 목적지 포트 번호 확인 
  - 전달할 애플리케이션 확인 후 TCP헤더 분리, 응용 계층에 전달
  
7️⃣ **응용 계층**에 도착! 어플리케이션에서 사용

<br />

#### ✔️ 동적 라우팅과 정적 라우팅

✅ **정적 라우팅**
- 관리자가 미리 라우팅 테이블에 경로를 수동으로 추가
- 목적지까지의 경로가 고정되어 있거나, 목적지까지의 경로가 하나로 한정될 경우 사용

✅ **동적 라우팅**
- 네트워크 변경을 자동으로 감지하여 라우팅 테이블을 업데이트 & 네트워크 장애 발생 시 라우터끼리 정보 교환 후 최적의 경로로 전환
- 관리자가 수동으로 추가할 필요 X
- 라우터에 많은 경로가 등록되어야 하는 대규모 네트워크에서 사용



<br /><br />

---

### :: 용어 정리💡

- `OSI모델(Open Standards Interconnection Model)`: 국제표준화기구(ISO)가 1977년에 정의한 **국제 통신 표준 규약**이다. 네트워크의 기본 구조를 7개의 계층으로 나눠서 표준화한 통신 규약으로 현재 다른 모든 통신 규약의 기반이 된다.

- `헤더(header)`: 저장되거나 전송되는 데이터의 맨 앞에 위치하는 추가적인 정보 데이터를 말한다. 데이터의 내용과 성격을 식별 또는 제어하는 데 사용된다. 

- `트레일러(trailer)`: 데이터의 맨 뒤에 위치하는 정보로 데이터의 무결성을 보장하는 데 사용한다. 

- `라우팅(routing)`: 네트워크에서 패킷을 목적지까지 보낼 수 있는 여러 경로 중 한 가지 경로를 설정해 주는 과정을 말한다. 

- `스위치(switch, 스위칭 허브)`: 랜을 구성할 때 단말기 간 스위칭 기능을 가진 통신망 중계 장치를 뜻한다. 컴퓨터(호스트)에서 특정한 단말기로 패킷을 보낼 수 있는 기능을 갖고 있어 통신 효율이 향상된다.  

- `라우터(router)`: 서로 다른 네트워크를 연결해 주는 장치로 한 네트워크에서 다른 네트워크로 패킷을 전송할 수 있도록 한다. 

